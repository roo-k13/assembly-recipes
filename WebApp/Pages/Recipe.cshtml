@page
@using Domain;
@model RecipeModel

<html>
<head>
    <title>@(Model?.Recipe?.Name)</title> <!-- Sets the page title to the name of the recipe -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"> <!-- Adds a link to the Bootstrap CSS library -->
</head>
<body>
    <div class="container-fluid">

        <div class="row">
            <div class="col-12">
                <div class="recipe-details text-center">

                    <!-- Displays the recipe name -->
                    <h2>@(Model?.Recipe?.Name)</h2>
                    @{
                        var isUserAuthenticated = User?.Identity?.IsAuthenticated ?? false;
                    }
                    @if (isUserAuthenticated)
                    {
                        <!-- Displays the delete and edit recipe buttons -->
                        <div class="row">
                            <div class="col-12">
                                <form method="post">
                                    <input type="hidden" asp-for="RecipeId" />
                                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this recipe?')">Delete Recipe</button>
                                </form>
                                <a asp-page="/UpdateRecipe" asp-route-id="@Model.Recipe.Id" class="btn btn-primary">Edit Recipe</a>

                            </div>
                        </div>



                    }

                    <!-- Displays the recipe image -->
                    <img src="~/images/@(Model?.Recipe?.ImageURL)" class="recipe-image mb-4" alt="@Model?.Recipe?.Name">

                    <!-- Displays the recipe description -->
                    <p class="recipe-description">@Model?.Recipe?.Description</p>

                    <div class="row">

                        <div class="col-md-6">
                            <partial name="_RecipeStepsPartial" model="Model?.Recipe?.Steps ?? new List<Step>()" /> <!-- Includes a partial view for displaying recipe steps -->
                        </div>

                        <div class="col-md-6">
                            <partial name="_RecipeIngredientsPartial" model="Model?.Recipe?.Ingredients ?? new List<Ingredient>()" /> <!-- Includes a partial view for displaying recipe ingredients -->
                        </div>

                    </div>
                </div>
            </div>
        </div>


    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script> <!-- Adds a link to the Bootstrap JavaScript library -->
</body>
</html>